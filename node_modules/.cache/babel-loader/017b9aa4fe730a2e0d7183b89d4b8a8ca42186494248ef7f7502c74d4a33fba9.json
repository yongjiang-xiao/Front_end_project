{"ast":null,"code":"import mapImg from \"@/assets/images/nk-map.jpg\";\nexport default {\n  name: \"MapView\",\n  data() {\n    return {\n      mapImg\n    };\n  },\n  async mounted() {\n    const root = this.$refs.rootRef;\n    const container = root?.querySelector?.(\".map-container\");\n\n    // æ¸…ç†æ—§çƒ­ç‚¹\n    if (container) {\n      container.querySelectorAll(\".hotspot\").forEach(n => n.remove());\n    }\n\n    // åŠ è½½åŸç‰ˆ map.js\n    await import(\"@/assets/js/map.js\");\n    document.dispatchEvent(new Event(\"DOMContentLoaded\"));\n\n    // âœ… å…³é”®ï¼šåŒæ­¥å³ä¾§é«˜åº¦ = å·¦ä¾§åœ°å›¾é«˜åº¦\n    this._mapRoot = root;\n    this._syncInfoHeight = () => {\n      const left = root.querySelector(\".map-container\");\n      const right = root.querySelector(\".info-box\");\n      if (!left || !right) return;\n      const h = Math.round(left.getBoundingClientRect().height);\n      if (h > 0) {\n        right.style.height = h + \"px\";\n        right.style.maxHeight = h + \"px\";\n        right.style.overflowY = \"auto\"; // å†…å®¹å¤šå°±åœ¨å³ä¾§æ»šåŠ¨\n      }\n    };\n    const img = root.querySelector(\".campus-map\");\n    if (img) {\n      // å›¾ç‰‡åŠ è½½å®Œå†åŒæ­¥ä¸€æ¬¡ï¼ˆå¦åˆ™ç¬¬ä¸€æ¬¡é«˜åº¦å¯èƒ½ä¸å‡†ï¼‰\n      img.addEventListener(\"load\", this._syncInfoHeight);\n      if (img.complete) this._syncInfoHeight();\n    }\n    window.addEventListener(\"resize\", this._syncInfoHeight);\n\n    // å†è¡¥ä¸€æ¬¡å»¶è¿ŸåŒæ­¥ï¼Œé˜²æ­¢é¦–æ¬¡æ¸²æŸ“/å­—ä½“åŠ è½½é€ æˆé«˜åº¦å˜åŒ–\n    setTimeout(this._syncInfoHeight, 50);\n    setTimeout(this._syncInfoHeight, 200);\n  },\n  beforeUnmount() {\n    const root = this._mapRoot;\n    const img = root?.querySelector?.(\".campus-map\");\n    if (img && this._syncInfoHeight) img.removeEventListener(\"load\", this._syncInfoHeight);\n    if (this._syncInfoHeight) window.removeEventListener(\"resize\", this._syncInfoHeight);\n  }\n};","map":{"version":3,"names":["mapImg","name","data","mounted","root","$refs","rootRef","container","querySelector","querySelectorAll","forEach","n","remove","document","dispatchEvent","Event","_mapRoot","_syncInfoHeight","left","right","h","Math","round","getBoundingClientRect","height","style","maxHeight","overflowY","img","addEventListener","complete","window","setTimeout","beforeUnmount","removeEventListener"],"sources":["C:\\Users\\åˆ˜æ–°åº·\\Desktop\\å¤§äºŒä¸Šè¯¾ç¨‹\\å‰ç«¯å¼€å‘å®è®­\\Front_end_project\\src\\views\\MapView.vue"],"sourcesContent":["<template>\r\n  <!-- âœ… åªåŠ ä¸€ä¸ª refï¼Œä¸æ”¹ç»“æ„ -->\r\n  <section id=\"map\" class=\"section map-section active\" ref=\"rootRef\">\r\n    <div class=\"container\">\r\n      <div class=\"page\">\r\n        <header class=\"page-header\">\r\n          <h1>å—å¼€å¤§å­¦äº¤äº’åœ°å›¾</h1>\r\n          <p>é¼ æ ‡æ»‘è¿‡æŸæ ‹å»ºç­‘ä¼šå‘å…‰æµ®èµ·ï¼Œç‚¹å‡»åé«˜äº®é”å®šå¹¶æ˜¾ç¤ºå¯¹åº”ä»‹ç»ï¼ŒæŒ‰ Esc å–æ¶ˆé€‰æ‹©ã€‚</p>\r\n        </header>\r\n\r\n        <main class=\"layout\">\r\n          <!-- å·¦ä¾§åœ°å›¾ -->\r\n          <section class=\"map-panel\">\r\n            <div class=\"map-container\">\r\n             <img :src=\"mapImg\" alt=\"å—å¼€å¤§å­¦æ‰‹ç»˜åœ°å›¾\" class=\"campus-map\" />\r\n              <!-- çƒ­ç‚¹ç”±åŸ map.js åŠ¨æ€ç”Ÿæˆ -->\r\n            </div>\r\n          </section>\r\n\r\n          <!-- å³ä¾§ä¿¡æ¯æ  -->\r\n          <aside class=\"info-panel\">\r\n            <div class=\"info-box\">\r\n              <h2 class=\"info-title\" id=\"info-title\">æ“ä½œæç¤º</h2>\r\n              <div class=\"info-image-container\" id=\"info-image-container\" style=\"display: none;\"></div>\r\n              <p class=\"info-body\" id=\"info-body\">\r\n                é¼ æ ‡ç§»åŠ¨åˆ°åœ°å›¾ä¸ŠæŸæ ‹å»ºç­‘åŒºåŸŸï¼Œä¼šçœ‹åˆ°è¯¥å»ºç­‘å‘å…‰æµ®èµ·ï¼›\r\n                ç‚¹å‡»åé«˜äº®ä¼šä¸€ç›´å­˜åœ¨ï¼Œå¹¶åœ¨å³ä¾§æ˜¾ç¤ºå¯¹åº”æ–‡å­—ä»‹ç»ã€‚\r\n                æŒ‰ Esc å–æ¶ˆå½“å‰é€‰æ‹©ã€‚\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"hint-box\">\r\n              <p>æ“ä½œè¯´æ˜ï¼š</p>\r\n              <ul>\r\n                <li>ğŸ–±ï¸ æ»‘è¿‡å»ºç­‘ï¼šé»„è‰²é«˜äº® + æµ®èµ·æ•ˆæœ</li>\r\n                <li>ğŸ–±ï¸ å·¦é”®ç‚¹å‡»ï¼šé«˜äº®é”å®š + æ–‡å­—ä»‹ç» + å›¾ç‰‡</li>\r\n                <li>â‹ Escï¼šå–æ¶ˆé«˜äº®ï¼Œæ¢å¤é»˜è®¤æç¤º</li>\r\n              </ul>\r\n            </div>\r\n          </aside>\r\n        </main>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- âœ… ä¸è¦éŸ³æ•ˆï¼šä¸æ”¾ audio -->\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport mapImg from \"@/assets/images/nk-map.jpg\";\r\n\r\nexport default {\r\n  name: \"MapView\",\r\n\r\n  data() {\r\n    return { mapImg };\r\n  },\r\n\r\n  async mounted() {\r\n    const root = this.$refs.rootRef;\r\n    const container = root?.querySelector?.(\".map-container\");\r\n\r\n    // æ¸…ç†æ—§çƒ­ç‚¹\r\n    if (container) {\r\n      container.querySelectorAll(\".hotspot\").forEach((n) => n.remove());\r\n    }\r\n\r\n    // åŠ è½½åŸç‰ˆ map.js\r\n    await import(\"@/assets/js/map.js\");\r\n    document.dispatchEvent(new Event(\"DOMContentLoaded\"));\r\n\r\n    // âœ… å…³é”®ï¼šåŒæ­¥å³ä¾§é«˜åº¦ = å·¦ä¾§åœ°å›¾é«˜åº¦\r\n    this._mapRoot = root;\r\n    this._syncInfoHeight = () => {\r\n      const left = root.querySelector(\".map-container\");\r\n      const right = root.querySelector(\".info-box\");\r\n      if (!left || !right) return;\r\n\r\n      const h = Math.round(left.getBoundingClientRect().height);\r\n      if (h > 0) {\r\n        right.style.height = h + \"px\";\r\n        right.style.maxHeight = h + \"px\";\r\n        right.style.overflowY = \"auto\"; // å†…å®¹å¤šå°±åœ¨å³ä¾§æ»šåŠ¨\r\n      }\r\n    };\r\n\r\n    const img = root.querySelector(\".campus-map\");\r\n    if (img) {\r\n      // å›¾ç‰‡åŠ è½½å®Œå†åŒæ­¥ä¸€æ¬¡ï¼ˆå¦åˆ™ç¬¬ä¸€æ¬¡é«˜åº¦å¯èƒ½ä¸å‡†ï¼‰\r\n      img.addEventListener(\"load\", this._syncInfoHeight);\r\n      if (img.complete) this._syncInfoHeight();\r\n    }\r\n\r\n    window.addEventListener(\"resize\", this._syncInfoHeight);\r\n\r\n    // å†è¡¥ä¸€æ¬¡å»¶è¿ŸåŒæ­¥ï¼Œé˜²æ­¢é¦–æ¬¡æ¸²æŸ“/å­—ä½“åŠ è½½é€ æˆé«˜åº¦å˜åŒ–\r\n    setTimeout(this._syncInfoHeight, 50);\r\n    setTimeout(this._syncInfoHeight, 200);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    const root = this._mapRoot;\r\n    const img = root?.querySelector?.(\".campus-map\");\r\n    if (img && this._syncInfoHeight) img.removeEventListener(\"load\", this._syncInfoHeight);\r\n    if (this._syncInfoHeight) window.removeEventListener(\"resize\", this._syncInfoHeight);\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n<style src=\"@/assets/css/global.css\"></style>\r\n<style src=\"@/assets/css/map.css\"></style>\r\n\r\n"],"mappings":"AAiDA,OAAOA,MAAK,MAAO,4BAA4B;AAE/C,eAAe;EACbC,IAAI,EAAE,SAAS;EAEfC,IAAIA,CAAA,EAAG;IACL,OAAO;MAAEF;IAAO,CAAC;EACnB,CAAC;EAED,MAAMG,OAAOA,CAAA,EAAG;IACd,MAAMC,IAAG,GAAI,IAAI,CAACC,KAAK,CAACC,OAAO;IAC/B,MAAMC,SAAQ,GAAIH,IAAI,EAAEI,aAAa,GAAG,gBAAgB,CAAC;;IAEzD;IACA,IAAID,SAAS,EAAE;MACbA,SAAS,CAACE,gBAAgB,CAAC,UAAU,CAAC,CAACC,OAAO,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC;IACnE;;IAEA;IACA,MAAM,MAAM,CAAC,oBAAoB,CAAC;IAClCC,QAAQ,CAACC,aAAa,CAAC,IAAIC,KAAK,CAAC,kBAAkB,CAAC,CAAC;;IAErD;IACA,IAAI,CAACC,QAAO,GAAIZ,IAAI;IACpB,IAAI,CAACa,eAAc,GAAI,MAAM;MAC3B,MAAMC,IAAG,GAAId,IAAI,CAACI,aAAa,CAAC,gBAAgB,CAAC;MACjD,MAAMW,KAAI,GAAIf,IAAI,CAACI,aAAa,CAAC,WAAW,CAAC;MAC7C,IAAI,CAACU,IAAG,IAAK,CAACC,KAAK,EAAE;MAErB,MAAMC,CAAA,GAAIC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAACK,qBAAqB,CAAC,CAAC,CAACC,MAAM,CAAC;MACzD,IAAIJ,CAAA,GAAI,CAAC,EAAE;QACTD,KAAK,CAACM,KAAK,CAACD,MAAK,GAAIJ,CAAA,GAAI,IAAI;QAC7BD,KAAK,CAACM,KAAK,CAACC,SAAQ,GAAIN,CAAA,GAAI,IAAI;QAChCD,KAAK,CAACM,KAAK,CAACE,SAAQ,GAAI,MAAM,EAAE;MAClC;IACF,CAAC;IAED,MAAMC,GAAE,GAAIxB,IAAI,CAACI,aAAa,CAAC,aAAa,CAAC;IAC7C,IAAIoB,GAAG,EAAE;MACP;MACAA,GAAG,CAACC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACZ,eAAe,CAAC;MAClD,IAAIW,GAAG,CAACE,QAAQ,EAAE,IAAI,CAACb,eAAe,CAAC,CAAC;IAC1C;IAEAc,MAAM,CAACF,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACZ,eAAe,CAAC;;IAEvD;IACAe,UAAU,CAAC,IAAI,CAACf,eAAe,EAAE,EAAE,CAAC;IACpCe,UAAU,CAAC,IAAI,CAACf,eAAe,EAAE,GAAG,CAAC;EACvC,CAAC;EAEDgB,aAAaA,CAAA,EAAG;IACd,MAAM7B,IAAG,GAAI,IAAI,CAACY,QAAQ;IAC1B,MAAMY,GAAE,GAAIxB,IAAI,EAAEI,aAAa,GAAG,aAAa,CAAC;IAChD,IAAIoB,GAAE,IAAK,IAAI,CAACX,eAAe,EAAEW,GAAG,CAACM,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAACjB,eAAe,CAAC;IACtF,IAAI,IAAI,CAACA,eAAe,EAAEc,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAACjB,eAAe,CAAC;EACtF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}